<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <title>ManyDesignsCarbon</title>
    <link href="img/favicon.png" rel="icon" type="image/x-icon"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/bootstrap.css" rel="stylesheet"/>
    <!-- Custom CSS theme-->
    <link href="css/custom.css" rel="stylesheet"/>
    <link href="css/sidebar.css" rel="stylesheet"/>
    <link href='https://fonts.googleapis.com/css?family=Montserrat:thin,extra-light,light,100,200,300,400,500,600,700,800'
          rel='stylesheet' type='text/css'>
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
<div class="wrapper">
    <!-- Sidebar -->
    <aside id="sidebar" class="bg-dark">
        <div class="h-100 position-fixed">
            <div class="sidebar-logo">
                <a href="index">#ManyDesignsCarbon</a>
            </div>
            <!-- Sidebar Navigation -->
            <ul class="sidebar-nav">
                <li class="sidebar-item">
                    <a href="index" class="sidebar-link">
                        <i class="bi bi-info-circle"></i>
                        About
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="schedule" class="sidebar-link">
                        <i class="bi bi-calendar3"></i> Schedule
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="pre_reg_template.html">
                        <i class="bi bi-file-text"></i> Pre-registration
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="policy_survey">
                        <i class="bi bi-code-square"></i> Policy Survey
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="coordinators" class="sidebar-link">
                        <i class="bi bi-people-fill"></i>
                        Project Coordinators
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="faqs" class="sidebar-link">
                        <i class="bi bi-question-circle"></i>
                        FAQ
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link"
                       href="mailto:rene.schwaiger@uibk.ac.at;%20armando.holzknecht@uibk.ac.at?subject=#ManyDesignsCarbon"><i
                            class="bi bi-envelope"></i> Contact</a>
                </li>
                <li class="sidebar-item pt-2 d-none">
                    <ul><a class="btn btn-outline-success-submission" href="submit"
                           style="width: 85%">Sign-up</a>
                    </ul>
                </li>
            </ul>
        </div>
    </aside>
    <!-- Main Component -->
    <div class="main animate-bottom">
        <nav class="navbar navbar-expand px-3 bg-light position-fixed bg-transparent">
            <!-- Button for sidebar toggle -->
            <button class="btn btn-outline-success-submission" id="toggler" type="button" data-bs-theme="dark">
                <span class="navbar-toggler-icon"></span>
            </button>
        </nav>
        <!-- Submission section-->
        <section id="Submission">
            <div class="container px-4 pt-5">
                <div class="row gx-4 justify-content-center">
                    <div class="col-lg-11">
                        <h2 class="mb-3 pt-3">Confirm further procedure</h2>
                        <p>
                            Please indicate whether your team will be sending the pre-registration and survey A
                            (see <a class="hyperlink" href="schedule">schedule</a> and see <a class="hyperlink"
                                                                                              href="pre_reg_template.html">template</a>)
                            by September 20th 2024. This can be done via the following <a class="hyperlink"
                                                                                          href="design_submission.html">form</a>.
                        </p>
                        <iframe id="hidden_iframe" name="hidden_iframe"
                                onload="if(submitted) {window.location='confirmation';}"
                                style="display:none;"></iframe>
                        <form action="https://docs.google.com/forms/d/e/1FAIpQLScoO8aFVzHm7I5fD5wLByMhiwlLYf7iVsE7ETn3mUygMZ5xiw/formResponse"
                              class="form"
                              id="myForm"
                              method="post" target="hidden_iframe">
                            <div class="d-flex align-items-start">
                                <div aria-orientation="vertical" class="nav nav-pills" id="v-pills-tab" role="tablist">
                                    <button aria-controls="v-pills-memberOne" aria-selected="true"
                                            class="nav-link nav-link-submission active"
                                            data-bs-target="#v-pills-memberOne" data-bs-toggle="pill"
                                            id="v-pills-memberOne-tab"
                                            role="tab"
                                            type="button">Confirmation
                                    </button>
                                </div>
                                <div class="tab-content w-100" id="v-pills-tabContent">
                                    <div aria-labelledby="v-pills-memberOne-tab" class="tab-pane fade show active"
                                         id="v-pills-memberOne"
                                         role="tabpanel">
                                        <div class="table table-border align-content-center justify-content-center d-flex"
                                             style="width: 100%">
                                            <table style="width: 85%">
                                                <tbody>
                                                <tr>
                                                    <td style="width:50%;">The ID of your research team:
                                                    </td>
                                                    <td style="width: 50%"><input class="form-control" id="RtAcronym"
                                                                                  name="entry.1555632454"
                                                                                  placeholder="" required type="text">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" class="pb-3">
                                                        <small class="form-text text-muted">Your team's ID is stated in
                                                            the notification email you received from us.</small>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">Disregarding the funding situation, my research team would be prepared to send
                                                        the pre-registration and
                                                        survey A no later than September 20th 2024 via this <a
                                                                class="hyperlink" href="design_submission.html">form</a>.
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" id="RadioParticipationYes"
                                                                   name="entry.951662645"
                                                                   required type="radio" value="Yes">
                                                            <label class="form-check-label"
                                                                   for="RadioParticipationYes">Yes</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" id="RadioParticipationNo"
                                                                   name="entry.951662645"
                                                                   type="radio" required value="No">
                                                            <label class="form-check-label" for="RadioParticipationNo">No</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><select class="form-select" style="display: none" required
                                                                id="SpecifcationNo" name="entry.951662645">
                                                        <option disabled selected value="">Please specify
                                                        </option>
                                                        <option value="No time">No time</option>
                                                        <option value="No clear research idea">No clear research idea
                                                        </option>
                                                        <option value="Personal issues">Personal issues</option>
                                                        <option value="Other">Other (specify)</option>
                                                        </option>
                                                    </select>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                <textarea class="form-control" id="SpecifcationNoOther" required
                                                          placeholder="Please specify" style="display: none;"
                                                          name="entry.951662645" rows="3"></textarea>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr id="FundingQuestion">
                                                    <td colspan="2">I confirm that my research team will be able to
                                                        secure the required funding of GBP 2,100 to be part of
                                                        the #ManyDesignsCarbon project.
                                                    </td>
                                                </tr>
                                                <tr id="FundingAnswers">
                                                    <td>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" id="RadioFundingYes"
                                                                   name="entry.787586223" type="radio" value="Yes"
                                                                   required>
                                                            <label class="form-check-label"
                                                                   for="RadioFundingYes">Yes</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" id="RadioFundingNo"
                                                                   name="entry.787586223" type="radio" value="No"
                                                                   required>
                                                            <label class="form-check-label"
                                                                   for="RadioFundingNo">No</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" id="RadioFundingUnsure"
                                                                   name="entry.787586223" type="radio" value="Unsure"
                                                                   required>
                                                            <label class="form-check-label" for="RadioFundingUnsure">Unclear
                                                                yet (please specify details):</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr id="UnsureDetailsRow" style="display: none;">
                                                    <td colspan="2">
                                                        <input class="form-control" type="text" id="UnsureDetails"
                                                               name="entry.2003558917"
                                                               placeholder="Please specify your current funding situation"
                                                               size="100">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="justify-content-center pt-3">
                                                        <input class="btn btn-outline-success-submission"
                                                               id="submitButton" type="submit" value="Send">
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <!-- redirect after submit-->
        <script type="text/javascript">
            var submitted = false
        </script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const form = document.getElementById('myForm');
                const submitButton = document.getElementById('submitButton');
                const unsureRadio = document.getElementById('RadioFundingUnsure');
                const unsureDetailsRow = document.getElementById('UnsureDetailsRow');
                const unsureDetails = document.getElementById('UnsureDetails');

                submitButton.addEventListener('click', function (event) {
                    // Prevent the form from submitting by default
                    event.preventDefault();

                    // Call the function to check if all required fields are filled
                    if (areRequiredFieldsFilled('myForm')) {
                        console.log('All required fields are filled.');
                        // Proceed with form submission if validation passes
                        submitted = true
                        form.submit();
                    } else {
                        console.log('Please fill in all required fields and consent.');
                        // Optionally, alert the user to fill all required fields
                        Swal.fire({
                            title: 'Error!',
                            confirmButtonColor: "#8BC443",
                            text: note,
                            icon: 'error',
                            confirmButtonText: 'OK'
                        })
                    }
                });

                document.querySelectorAll('input[name="entry.787586223"]').forEach(radio => {
                    radio.addEventListener('change', function () {
                        if (this.value === 'Unsure') {
                            unsureDetailsRow.style.display = 'table-row';
                            unsureDetails.setAttribute('required', '');
                        } else {
                            unsureDetailsRow.style.display = 'none';
                            unsureDetails.removeAttribute('required');
                        }
                    });
                });

                document.getElementById('RadioParticipationYes').addEventListener('change', function () {
                    if (this.checked) {
                        document.getElementById('FundingQuestion').style.display = "table-row";
                        document.getElementById('FundingAnswers').style.display = "table-row";
                        document.querySelectorAll('input[name="entry.787586223"]').forEach(radio => {
                            radio.setAttribute("required", "");
                        });
                    }
                });

                document.getElementById('RadioParticipationNo').addEventListener('change', function () {
                    if (this.checked) {
                        document.getElementById('FundingQuestion').style.display = "none";
                        document.getElementById('FundingAnswers').style.display = "none";
                        document.querySelectorAll('input[name="entry.787586223"]').forEach(radio => {
                            radio.removeAttribute("required");
                        });
                        unsureDetailsRow.style.display = 'none';
                        unsureDetails.removeAttribute('required');
                    }
                });
            });

            function areRequiredFieldsFilled(formId) {
                const form = document.getElementById(formId);
                const requiredInputs = form.querySelectorAll('input[required], textarea[required], select[required]');
                const radioButtonsFunding = document.querySelectorAll('input[name="entry.787586223"]'); // Funding radio buttons
                const radioButtonsConfirmation = document.querySelectorAll('input[name="entry.951662645"]'); // Confirmation radio buttons
                const isFundingSelected = Array.from(radioButtonsFunding).some(radio => radio.checked);
                const isConfirmationSelected = Array.from(radioButtonsConfirmation).some(radio => radio.checked);

                for (const input of requiredInputs) {
                    if (input.value.trim() === '') {
                        note = 'Please fill in all required fields.';
                        return false;
                    }
                }

                if (!isFundingSelected && document.getElementById('RadioParticipationYes').checked) {
                    note = 'Please fill in all required fields.';
                    return false;
                }

                if (!isConfirmationSelected) {
                    note = 'Please fill in all required fields.';
                    return false;
                }

                // If all required fields are filled, return true
                return true;
            }
        </script>
    </div>
</div>
<!-- Bootstrap core JS-->
<script src="js/bootstrap.bundle.js"></script>
<!-- Core theme JS-->
<script src="js/application.js"></script>
<script src="js/sidebar.js"></script>
</body>
</html>
